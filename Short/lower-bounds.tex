
%\luin{exemples + rappel copy cat (sous angle de r = 1) + lemma no diseq}

%\begin{example}\lu{est ce que cet exemple a vraiment sa place dans la version conférence ? j'aurai plutot mis un exemple qui donne une idée de 1) pourquoi c'est plus facile que dans le cas général et/ou 2) pourquoi c'est plus compliqué que le papier de RP }
%	In some cases a protocol may require a "run" of exponential length (in the number of states) to reach a configuration satisfying a "query".
%	
%	\begin{figure}[h]
%		\input{Figures/fig-exp-run}
%		\caption{Example of a "protocol" with a state that requires an exponentially long "run" to be covered.}
%		\label{fig:exp-run}
%	\end{figure}
%
%	Consider the "protocol" displayed in Figure~\ref{fig:exp-run}. 
%	For all $n \in \set{0, \ldots, N+1}$ we call \emph{future} of $n$ the set of states accessible from state $n$ by a path in the protocol.
%	
%	There is an initial run covering $N+1$: we start with $2^{N+1}$ agents, which we pair two by two. We make each agent broadcast $m_0$ while its partner receives it, storing its register value and broadcasts $m'_0$, which the first one receives. After doing that with all pairs of agents we have $2^{N}$ agents in state $1$.
%	We repeat this process to put $2^{N+1-n}$ agents in state $n$ for each $n$, one after the other. In the end we have an agent in state $N+1$.
%	
%	We show by induction on $n$ that for all $k \in \nats$, any reachable configuration with at least $k$ agents in states of the future of $n$ has at least $k(2^n-1)$ agents in states $\set{q_i \mid i<n}$.
%	
%	For $n=0$ this is immediate. Let $n>0$, suppose the property true for $n-1$, then let $k \in \nats$ and let $\config$ be a configuration with at least $k$ agents in the future of $n$. Let $\agents_+$ be the set of those agents, let $a_+ \in \agents_+$, $a_+$ has taken the transitions broadcasting $m_{n-1}$ and receiving $m'_{n-1}$ with its own register value. As it never changed its identifier, the reception must contain its initial value $r$. Hence there exists an agent $a_-$ which broadcasts $m'_{n-1}$ at some point while having value $r$. All such $a_-$ are distinct as they all broadcast only once with $m'_{n-1}$ and the $a_+$ have distinct initial values.
%	Hence there are at least $k$ agents in state $q_{n-1}$, hence at least $2k$ in the future of $n-1$. By induction hypothesis this means there are $2k(2^{n-1}-1) = k(2^n-2)$ in $\set{q_i \mid i<n-1}$, thus at least $k(2^n-1)$ in $\set{q_i \mid i<n}$.
%	
%	As a consequence, any initial run covering $N+1$ needs to send at least $2^N-1$ agents to the $q_i$ states, hence it needs to be exponentially long as each of those agents needs to execute at least one broadcast.
%\end{example}


