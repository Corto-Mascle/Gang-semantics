

	\begin{tikzpicture}
		% \draw[white,fill=gray!20] (2,0) rectangle (3,0.8);
		% \draw[white,fill=gray!20] (2,1.3) rectangle (3,2.5);
		
		% \draw (0,0) rectangle (5,2.5);
		
		% \draw (0,0.8) rectangle (5,1.3);
		
		% \draw (0,0.8) rectangle (0.3,1.3);
		% \draw (0,0.8) rectangle (1.3,1.3);
		% \draw[fill=red!20] (1.3,0.8) rectangle (4,1.3);
		
		% \draw[dotted] (2,0) -- (2,2.5);
		% \draw[dotted] (3,0) -- (3,2.5);
		
		
		
		% \draw (0,-3) rectangle (4,-0.5);
		
		% \draw (0,-2.2) rectangle (4,-1.7);
		
		% \draw (0,-2.2) rectangle (0.3,-1.7);
		% \draw (0.3,-2.2) rectangle (1.3,-1.7);
		% \draw[fill=red!20] (1.2,-2.2) rectangle (2.8,-1.7);
		
		% \draw[dotted] (2,-3) -- (2,-0.5);
		
		% \draw (5.4,-3) -- (5.4,2.5);
		
		\node at (4,1) [align = center] {Original \\ local run};
		
		\node at (5.5,1.7) {reg $1$};
		\node at (5.5,1.2) {reg $2$};
		\node at (5.5,0.7) {reg $3$};
		\node at (5.5,0.2) {reg $4$};
		\draw (6,0) rectangle (10.9,0.5);
		\draw (6,0.5) rectangle (10.3,1);
		\draw (6,1) rectangle (10.7,1.5);
		\draw (6,1.5) rectangle (11.2,2);
		
		\draw[white,fill=blue!20] (7,0) rectangle (10,2);
		\draw[white,fill=green!20] (11.5,0) rectangle (14.5,2);
		
		\draw[white,fill=blue!30] (7,0) rectangle (7.5,0.5);
		\draw[white,fill=BlueGreen!40] (7.5,0) rectangle (8.8,0.5);
		\node at (8.15,0.2) {$v$};
		\draw[white,fill=blue!45] (8.8,0) rectangle (10,0.5);
		\draw (6,0) rectangle (6.5,0.5);
		\draw (6,0) rectangle (7.5,0.5);
		\draw (6,0) rectangle (8.8,0.5);
		
		\draw[white,fill=green!47] (11.5,0) rectangle (12,0.5);
		\draw[white,fill=BlueGreen!40] (12,0) rectangle (13.3,0.5);
		\node at (12.65,0.2) {$v$};
		\draw[white,fill=green!57] (13.3,0) rectangle (14.5,0.5);
		\draw (6,0) rectangle (12,0.5);
		\draw (6,0) rectangle (13.3,0.5);
		
		\draw[white,fill=blue!50] (7,0.5) rectangle (7.7,1);
		\draw[white,fill=blue!20] (7.7,0.5) rectangle (9.4,1);
		\draw[white,fill=blue!35] (9.4,0.5) rectangle (10,1);
		\draw (6,0.5) rectangle (6.3,1);
		\draw (6,0.5) rectangle (7.7,1);
		\draw (6,0.5) rectangle (9.4,1);
		
		\draw[white,fill=green!70] (11.5,0.5) rectangle (12.2,1);
		\draw[white,fill=green!20] (12.2,0.5) rectangle (13.9,1);
		\draw[white,fill=green!40] (13.9,0.5) rectangle (14.5,1);
		\draw (6,0.5) rectangle (12.2,1);
		\draw (6,0.5) rectangle (13.9,1);
		
		\draw[white,fill=blue!35] (7,1) rectangle (8.1,1.5);
		\draw[white,fill=blue!55] (8.1,1) rectangle (9.5,1.5);
		\draw[white,fill=blue!25] (9.5,1) rectangle (10,1.5);
		\draw (6,1) rectangle (6.7,1.5);
		\draw (6,1) rectangle (8.1,1.5);
		\draw (6,1) rectangle (9.5,1.5);
		
		\draw[white,fill=green!57] (11.5,1) rectangle (12.6,1.5);
		\draw[white,fill=green!60] (12.6,1) rectangle (14,1.5);
		\draw[white,fill=green!25] (14,1) rectangle (14.5,1.5);
		\draw (6,1) rectangle (12.6,1.5);
		\draw (6,1) rectangle (14,1.5);
		\draw (6,1) rectangle (14.7,1.5);
		
		\draw[white,fill=blue!15] (7,1.5) rectangle (7.3,2);
		\draw[white,fill=blue!35] (7.3,1.5) rectangle (8.9,2);
		\draw[white,fill=blue!25] (8.9,1.5) rectangle (10,2);
		\draw (6,1.5) rectangle (6.5,2);
		\draw (6,1.5) rectangle (7.3,2);
		\draw (6,1.5) rectangle (8.9,2);
		\node at (6.8,2.4) [align = center] {$\quotemarks{\enregact}$ actions};
		\draw[->] (6.5,2.2) -- (6.5,2);
		\draw[->] (7.3,2.2) -- (7.3,2);

		\draw[white,fill=green!70] (11.5,1.5) rectangle (11.8,2);
		\draw[white,fill=green!40] (11.8,1.5) rectangle (13.4,2);
		\draw[white,fill=green!15] (13.4,1.5) rectangle (14.5,2);
		\draw (6,1.5) rectangle (11.8,2);
		\draw (6,1.5) rectangle (13.4,2);
		
		\draw[<->] (8.5, 2.2) -- (13,2.2);
		\node[align = center] at (10.75,2.4) {removed part};

		\draw[dashed] (8.5,0) -- (8.5,2);
		\draw[dashed] (13,0) -- (13,2);
		

		\begin{scope}[xshift = 2cm, yshift = -0.5cm]
		
		\node at (4, -2) [align = center] {Shortened \\ local run};
		\node at (5.5,-1.3) {reg $1$};
		\node at (5.5,-1.8) {reg $2$};
		\node at (5.5,-2.3) {reg $3$};
		\node at (5.5,-2.8) {reg $4$};
		\draw[<->] (7,-0.8) -- (10,-0.8);
		\node at (8.5, -0.6) {$s, \Theta$};
		\draw[white,fill=blue!30] (7,-3) rectangle (7.5,-2.5);
		\draw[white,fill=BlueGreen!40] (7.5,-3) rectangle (8.8,-2.5);

		\node at (8.15,-2.8) {$v$};
		\draw[white,fill=green!57] (8.8,-3) rectangle (10,-2.5);
		
		\draw[white,fill=blue!50] (7,-2.5) rectangle (7.7,-2);
		\draw[white,fill=brown!40] (7.7,-2.5) rectangle (9.4,-2);
		\draw[white,fill=green!40] (9.4,-2.5) rectangle (10,-2);
		
		\draw[white,fill=blue!35] (7,-2) rectangle (8.1,-1.5);
		\draw[white,fill=red!55] (8.1,-2) rectangle (9.5,-1.5);
		\draw[white,fill=green!25] (9.5,-2) rectangle (10,-1.5);
		
		\draw[white,fill=blue!15] (7,-1.5) rectangle (7.3,-1);
		\draw[white,fill=yellow!35] (7.3,-1.5) rectangle (8.9,-1);
		\draw[white,fill=green!15] (8.9,-1.5) rectangle (10,-1);
		
		\node at (8.5, -3.5) {fresh values};
		\draw[->] (8.7,-3.3) -- (8.7,-2.25);
		\draw[->] (8.6,-3.3) -- (8.6,-1.75);
		\draw[->] (8.4,-3.3) -- (8.4,-1.25);
		\draw[dashed] (8.5,-3) -- (8.5,-1);
		
		\draw (6,-3) rectangle (10.5,-2.5);
		\draw (6,-3) rectangle (10.5,-2);
		\draw (6,-3) rectangle (10.5,-1.5);
		\draw (6,-3) rectangle (10.5,-1);
		
		\draw (6,-3) rectangle (6.5,-2.5);
		\draw (6,-3) rectangle (7.5,-2.5);
		\draw (6,-3) rectangle (8.8,-2.5);
	
		\draw (6,-2.5) rectangle (6.3,-2);
		\draw (6,-2.5) rectangle (7.7,-2);
		\draw (6,-2.5) rectangle (9.4,-2);
		
		\draw (6,-2) rectangle (6.7,-1.5);
		\draw (6,-2) rectangle (8.1,-1.5);
		\draw (6,-2) rectangle (9.5,-1.5);
		\draw (6,-2) rectangle (10.2,-1.5);
		
		\draw (6,-1.5) rectangle (6.5,-1);
		\draw (6,-1.5) rectangle (7.3,-1);
		\draw (6,-1.5) rectangle (8.9,-1);
		\end{scope}

		\draw (6,0) rectangle (15,0.5);
		\draw (6,0) rectangle (15,1);
		\draw (6,0) rectangle (15,1.5);
		\draw (6,0) rectangle (15,2);
		
		\draw[<->] (7,-0.2) -- (10,-0.2);
		\draw[<->] (11.5,-0.2) -- (14.5,-0.2);
		
		\node (s1) at (8.5,-0.4) {$s, \Theta$};
		\node (s2) at (13,-0.4) {$s, \Theta$};
	\end{tikzpicture}

