\newcommand{\tikzabstractconfig}[5]{% x, y, val1, val2, q, x1, y1
	\begin{tikzpicture}
		\draw (#1,#2) rectangle (1 + #1,0.5 +#2);
		\draw (#1,-0.5 + #2) rectangle (1 +#1 ,#2);
		\node[] (x1) at (0.5 + #1, 0.15 +#2) {#3};
		\node[] (x2) at (0.5 +#1 , 0.15- 0.5 +#2) {#4};
		\node [] (q) at (0.5 +#1, 0.7+#2) {#5};
	\end{tikzpicture}
}

\newcommand{\tikzvalue}[4]{% x, y, length, val
	\begin{tikzpicture}
		\node [] (v) at (#1 + #3 + 0.3, #2 + 1.2) {$\mathbf{v}= #4$};
	\end{tikzpicture}
}

\newcommand{\tikzspec}[4]{% x, y, length, spec
	\begin{tikzpicture}
		\node [] (sp) at (#3 /2, #2 - 0.2) {#4};
	\end{tikzpicture}
}

\begin{tikzpicture} [xscale = 0.8, yscale = 0.9, every node/.style = {scale = 0.9}]
	
	%	
	%	\tikzabstractconfig{0}{0}{$x_1$}{$y_1$}{$q_0$}
	%	\tikzabstractconfig{1}{0}{$x_1$}{$y_1$}{$q_1$}
	%	\tikzabstractconfig{2}{0}{$x_1$}{$y_2$}{$q_4$}
	%	\tikzabstractconfig{3}{0}{$x_1$}{$y_2$}{$q_6$}
	% \node [] (sp) at (6, 0.2) {Node $\node_1$};
	% \node [] (sp) at (6, 0.2-0.5) {$\spec(\node_1) = \epsilon$};
	% \node [] (sp) at (6, 0.2-1) {$v = 1$};
	% \draw (-0.5,0) rectangle (0.5,0.5);
	% \draw (-0.5,-0.5 ) rectangle (0.5 ,0);
	% \draw (-0.5,-0.5) rectangle (0.5,-1);
	% \node (reg1) at (-1, 0.15) {reg $1$};
	% \node (reg2) at (-1, 0.15-0.5) {reg $2$};
	% \node (reg3) at (-1, 0.15-0.5-0.5) {reg $3$};

	% \node[] (x1) at (0, 0.15) {$1$};
	% \node[] (x2) at (0 , 0.15- 0.5) {$\_$};
	
	% \node[] (x2) at (0 , 0.15- 0.5-0.5) {$\_$};
	% \node [] (q) at (0 , 0.7) {$\_$};
	
	% \draw (0.5,0) rectangle (1.5,0.5);
	% \draw[fill = orange, opacity=0.4]  (0.5,-0.5) rectangle (1.5,0);
	% \draw (0.5,-0.5 ) rectangle (1.5 ,0);
	% \draw (0.5,-1) rectangle (1.5,-0.5);
	% \node[] (x1) at (1, 0.15) {$1$};
	% \node[] (x2) at (1 , 0.15- 0.5) {$2$};
	% \node[] (x2) at (1 , 0.15- 0.5-0.5) {$\_$};
	% \node [] (q) at (1 , 0.7) {$q_1$};
	
	% \draw (1.5,0) rectangle (2.5,0.5);
	% \draw[fill = orange, opacity=0.4] (1.5,-0.5) rectangle (2.5,0.5-0
	% .5);
	% \draw (1.5,-0.5 ) rectangle (2.5 ,0);
	% \draw[fill = cyan, opacity=0.4] (1.5,-0.5-0
	% .5 ) rectangle (2.5 ,0-0
	% .5);
	% \draw (1.5,-0.5-0.5 ) rectangle (2.5 ,0-0.5);
	% \node[] (x1) at (2, 0.15) {$1$};
	% \node[] (x2) at (2 , 0.15- 0.5) {$2$};
	% \node[] (x2) at (2 , 0.15- 0.5-0.5) {$3$};
	% \node [] (q) at (2 , 0.7) {$q_2$};
	
	
	% \draw[] (2.5,0) rectangle (3.5,0.5);
	% \draw[fill = orange, opacity=0.4] (2.5,0-0.5) rectangle (3.5,0.5-0.5);
	% \draw (2.5,-0.5 ) rectangle (3.5 ,0);
	% \draw[fill = cyan, opacity=0.4]  (2.5,-0.5-0.5 ) rectangle (3.5 ,0-0.5);
	% \draw (2.5,-0.5 -0.5) rectangle (3.5 ,0-0.5);
	% \node[] (x1) at (3, 0.15) {$1$};
	% \node[] (x2) at (3 , 0.15- 0.5) {$2$};
	% \node[] (x2) at (3 , 0.15- 0.5-0.5) {$3$};
	% \node [] (q) at (3 , 0.7) {$q_3$};
	
	% \draw[] (3.5,0) rectangle (4.5,0.5);
	% \draw[fill = orange, opacity=0.4] (3.5,0-0.5) rectangle (4.5,0.5-0.5);
	% \draw (3.5,-0.5 ) rectangle (4.5 ,0);
	% \draw[fill = cyan, opacity=0.4]  (3.5,-0.5 -0.5) rectangle (4.5 ,0-0.5);
	% \draw (3.5,-0.5-0.5 ) rectangle (4.5 ,0-0.5);
	% \node[] (x1) at (4, 0.15) {$1$};
	% \node[] (x2) at (4 , 0.15- 0.5) {$2$};
	% \node[] (x2) at (4 , 0.15- 0.5-0.5) {$3$};
	% \node [] (q) at (4 , 0.7) {$q_4$};
	

	\node [font = {\footnotesize}] (sp) at (6.5, 0.2-0.5) {Node $\node_1$ ($a_1$ in $\run$)};
	\node [font = {\footnotesize}] (sp) at (6.5, 0.2-1) {$\spec = \epsilon$};
	\node [font = {\footnotesize}] (sp) at (6.5, 0.2-1.5) {$v = 1$};

	\regbar{-1}{0}
	\onerow{-0.5}{0}{$q_0$}{$1$}{white}{$\_$}{white}{$\_$}{white}
	\onerow{0.5}{0}{$q_1$}{$1$}{white}{$2$}{orange}{$\_$}{white}
	\onerow{1.5}{0}{$q_2$}{$1$}{white}{$2$}{orange}{$3$}{cyan}
	\onerow{2.5}{0}{$q_3$}{$1$}{white}{$2$}{orange}{$3$}{cyan}
	\onerow{3.5}{0}{$q_4$}{$1$}{white}{$2$}{orange}{$3$}{cyan}
	
	\draw (2, -1.7) -- (-1, -2.5);
	\draw (2, -1.7) -- (5, -2.5);
	
	\regbar{-3.5}{-3}
	\onerow{-3}{-3}{$q_0$}{$2$}{orange}{$\_$}{white}{$\_$}{white}
	\onerow{-2}{-3}{$q_5$}{$2$}{orange}{$\_$}{white}{$\_$}{white}
	\onerow{-1}{-3}{$q_5$}{$2$}{orange}{$\_$}{white}{$\_$}{white}
	\onerow{0}{-3}{$q_6$}{$2$}{orange}{$\_$}{white}{$\_$}{white}
	\node [align=center, font = {\footnotesize}] (sp) at (-5.5, -2.5-0.8) {Node $\node_2$ ($a_2$)};
	\node [align = center, font = {\footnotesize}] (sp) at (-5.5,-3-0.8) {$\spec = \exready \cdot \exgotwo$};
	\node [align = center, font = {\footnotesize}] (sp) at (-5.5, -3.5-0.8) {$v = 2$};

	\regbar{3}{-3}
	\onerow{3.5}{-3}{$q_0$}{$3$}{cyan}{$\_$}{white}{$\_$}{white}
	\onerow{4.5}{-3}{$q_5$}{$3$}{cyan}{$\_$}{white}{$\_$}{white}
	\onerow{5.5}{-3}{$q_6$}{$3$}{cyan}{$\_$}{white}{$\_$}{white}
	\node [align=center, font = {\footnotesize}] (sp) at (8, -2.5-0.8) {Node $\node_3$ ($a_3$)};
	\node [align = center, font = {\footnotesize}] (sp) at (8,-3-0.8) {$\spec = \exready \cdot \exgothree$};
	\node [align = center, font = {\footnotesize}] (sp) at (8, -3.5-0.8) {$v = 3$};
	
\draw (-1, -3-1.7) -- (-1, -3-1.7-0.7);
\draw (5, -3-1.7) -- (5, -3-1.7-0.7);

	\regbar{-2.5}{-6}
	\onerow{-2}{-6}{$q_0$}{$4$}{white}{$\_$}{white}{$\_$}{white}
	\onerow{-1}{-6}{$q_0$}{$4$}{white}{$\_$}{white}{$\_$}{white}
	\node [align=center, font = {\footnotesize}] (sp) at (-4.5, -2.5-0.8-3) {Node $\node_4$ ($a_3$)};
	\node [align = center, font = {\footnotesize}] (sp) at (-4.5,-3-0.8-3) {$\spec = \exready$};
	\node [align = center, font = {\footnotesize}] (sp) at (-4.5, -3.5-0.8-3) {$v = 4$};
	
	\regbar{3}{-6}
	\onerow{3.5}{-6}{$q_0$}{$5$}{white}{$\_$}{white}{$\_$}{white}
	\onerow{4.5}{-6}{$q_5$}{$5$}{white}{$\_$}{white}{$\_$}{white}
	\onerow{5.5}{-6}{$q_5$}{$5$}{white}{$\_$}{white}{$\_$}{white}
	\node [align=center, font = {\footnotesize}] (sp) at (8, -2.5-0.8-3) {Node $\node_5$ ($a_2$)};
	\node [align = center, font = {\footnotesize}] (sp) at (8,-3-0.8-3) {$\spec = \exready$};
	\node [align = center, font = {\footnotesize}] (sp) at (8, -3.5-0.8-3) {$v = 5$};

\draw (5, -6-1.7) -- (5, -6-1.7-0.7);

	\regbar{3.5}{-9}
	\onerow{4}{-9}{$q_0$}{$6$}{white}{$\_$}{white}{$\_$}{white}
	\onerow{5}{-9}{$q_0$}{$6$}{white}{$\_$}{white}{$\_$}{white}
	\node [align=center, font = {\footnotesize}] (sp) at (7.5, -8.5-0.8) {Node $\node_6$ ($a_3$)};
	\node [align = center, font = {\footnotesize}] (sp) at (7.5,-9-0.8) {$\spec = \exready$};
	\node [align = center, font = {\footnotesize}] (sp) at (7.5, -9.5-0.8) {$v = 6$};

% 	\draw (-2,-3) rectangle (-1,-2.5);
% 	\draw [fill = orange, opacity=0.4] (-2,-2.5) rectangle (-1,-2);
% %	\draw  [fill = cyan, opacity=0.4] (-2,-3 ) rectangle (-1 ,-2.5);    
% %	\draw  (-2,-3 ) rectangle (-1 ,-2.5);
% 	\node[] (x1) at (-1.5, 0.2 - 2.5) {$x_2$};
% %	\node[] (x2) at (-1.5 , 0.15- 0.5 - 2.5) {$y_2$};
% 	\node [] (q) at (-1.5 , 0.7 - 2.5) {$q_0$};
	
% 	\draw (-1,-2.5) rectangle (0,-2);
% 	\draw [fill = orange, opacity=0.4] (-1,-2.5) rectangle (0,-2);
% %	\draw [fill = cyan, opacity=0.4] (-1,-3 ) rectangle (0 ,-2.5);    
% %	\draw (-1,-3 ) rectangle (0 ,-2.5);
% 	\node[] (x1) at (-0.5, 0.2 -2.5) {$x_2$};
% %	\node[] (x2) at (-0.5 , 0.15- 0.5 - 2.5) {$y_2$};
% 	\node [] (q) at (-0.5 , 0.7-2.5) {$q_5$};
	
% 	\draw [fill = orange, opacity=0.4] (0,-2.5) rectangle (1,-2);
% 	\draw (0,-2.5) rectangle (1,-2);
% %	\draw (0,-3 ) rectangle (1 ,-2.5);
% %	\draw[fill = cyan, opacity=0.4] (0,-3 ) rectangle (1 ,-2.5);
% 	\node[] (x1) at (0.5, 0.2 -2.5) {$x_2$};
% %	\node[] (x2) at (0.5 , 0.15- 0.5 - 2.5) {$y_2$};
% 	\node [] (q) at (0.5 , 0.7-2.5) {$q_5$};
	
	
	
	

	

% 	%	\draw (-3,-2) rectangle (-2,0.5 -2);
% 	%	\draw (-3,-0.5 -2) rectangle (1 -3 ,-2);
% 	%\node[] (x1) at (0.5 + #1, 0.15 +#2) {#3};
% 	%\node[] (x2) at (0.5 +#1 , 0.15- 0.5 +#2
% 	%	
% 	%	\tikzabstractconfig{-3}{-2}{$x_1$}{$y_1$}{$q_0$} 
% 	%	\tikzabstractconfig{-2}{-2}{$x_1$}{$y_1$}{$q_1$}
	
	
% 	\draw (3.5,-2.5) rectangle (4.5,-2);
% %	\draw (3.5,-3 ) rectangle (4.5 ,-2.5);
% 	\node[] (x1) at (4, 0.15 - 2.5) {$x_3$};
% %	\node[] (x2) at (4 , 0.15- 0.5 - 2.5) {$y_4$};
% 	\node [] (q) at (4 , 0.7 - 2.5) {$q_0$};
	
% 	\draw (4.5,-2.5) rectangle (5.5,-2);
% 	\draw[fill = cyan, opacity=0.4]  (4.5,-2.5) rectangle (5.5,-2);
% %	\draw (4.5,-3 ) rectangle (5.5 ,-2.5);
% 	\node[] (x1) at (5, 0.15 - 2.5) {$x_3$};
% %	\node[] (x2) at (5 , 0.15- 0.5 - 2.5) {$y_4$};
% 	\node [] (q) at (5 , 0.7 - 2.5) {$q_5$};
	
% 	\draw (5.5,-2.5) rectangle (6.5,-2);
% 	\draw[fill = cyan, opacity=0.4] (5.5,-2.5) rectangle (6.5,-2);
% %	\draw (5.5,-3 ) rectangle (6.5 ,-2.5);
% 	\node[] (x1) at (6, 0.15 - 2.5) {$x_3$};
% %	\node[] (x2) at (6 , 0.15- 0.5 - 2.5) {$y_4$};
% 	\node [] (q) at (6 , 0.7 - 2.5) {$q_5$};
	
% %	\draw[fill = cyan, opacity=0.4] (6.5,-2.5) rectangle (7.5,-2);
% %	\draw (6.5,-2.5) rectangle (7.5,-2);
% %%	\draw (6.5,-3 ) rectangle (7.5 ,-2.5);
% %	\node[] (x1) at (7, 0.15 -2.5) {$x_1$};
% %%	\node[] (x2) at (7 , 0.15- 0.5 - 2.5) {$y_4$};
% %	\node [] (q) at (7 , 0.7-2.5) {$q_4$};
	
% 	\node [] (sp) at (7.6, -2) {Node $\node_3$};
% 	\node [] (sp) at (7.9, -2.5) {$\spec = hey \cdot ack$};
% 	\node [] (sp) at (7.6, -3) {$v = x_3$};
	
	%	\draw (7.5,-2.5) rectangle (8.5,-2);
	%	\draw (7.5,-3 ) rectangle (8.5,-2.5);
	%	\node[] (x1) at (8, 0.2 -2.5) {$x'_2$};
	%	\node[] (x2) at (8 , 0.15- 0.5 - 2.5) {$y_2$};
	%	\node [] (q) at (8 , 0.7-2.5) {$q_4$};
	%	
\end{tikzpicture}